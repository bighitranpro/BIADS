<!-- Help & Documentation Page -->
<div class="help-container">
    <div class="help-header">
        <h2>‚ùì Tr·ª£ gi√∫p & T√†i li·ªáu</h2>
        <div class="search-help">
            <input type="text" id="helpSearch" placeholder="üîç T√¨m ki·∫øm tr·ª£ gi√∫p...">
        </div>
    </div>

    <div class="help-content">
        <!-- Sidebar Navigation -->
        <aside class="help-sidebar">
            <nav class="help-nav">
                <button class="help-nav-item active" data-section="getting-started">
                    üöÄ B·∫Øt ƒë·∫ßu nhanh
                </button>
                <button class="help-nav-item" data-section="account-management">
                    üë§ Qu·∫£n l√Ω t√†i kho·∫£n
                </button>
                <button class="help-nav-item" data-section="proxy-setup">
                    üåê C·∫•u h√¨nh Proxy
                </button>
                <button class="help-nav-item" data-section="tasks">
                    üìã T√°c v·ª• t·ª± ƒë·ªông
                </button>
                <button class="help-nav-item" data-section="webhook">
                    üì° Facebook Webhook
                </button>
                <button class="help-nav-item" data-section="telegram">
                    üì± Telegram Bot
                </button>
                <button class="help-nav-item" data-section="plugins">
                    üîå Plugin System
                </button>
                <button class="help-nav-item" data-section="troubleshooting">
                    üîß X·ª≠ l√Ω s·ª± c·ªë
                </button>
                <button class="help-nav-item" data-section="api-docs">
                    üìö API Documentation
                </button>
                <button class="help-nav-item" data-section="faq">
                    üí° FAQ
                </button>
            </nav>
        </aside>

        <!-- Main Help Content -->
        <main class="help-main" id="helpMain">
            <!-- Content will be loaded here -->
        </main>
    </div>
</div>

<style>
.help-container {
    padding: 20px;
    height: 100%;
    display: flex;
    flex-direction: column;
}

.help-header {
    margin-bottom: 30px;
}

.help-header h2 {
    font-size: 24px;
    color: #fff;
    margin-bottom: 15px;
}

.search-help input {
    width: 100%;
    padding: 12px 20px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    color: #e0e0e0;
    font-size: 14px;
}

.help-content {
    display: flex;
    gap: 30px;
    flex: 1;
    overflow: hidden;
}

.help-sidebar {
    width: 250px;
    background: #1a1a2e;
    border-radius: 12px;
    padding: 20px 0;
    overflow-y: auto;
}

.help-nav {
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.help-nav-item {
    width: 100%;
    padding: 12px 20px;
    background: transparent;
    border: none;
    color: #b0b0b0;
    font-size: 14px;
    text-align: left;
    cursor: pointer;
    transition: all 0.3s ease;
    border-left: 3px solid transparent;
}

.help-nav-item:hover {
    background: rgba(102, 126, 234, 0.1);
    color: #667eea;
    border-left-color: #667eea;
}

.help-nav-item.active {
    background: rgba(102, 126, 234, 0.15);
    color: #667eea;
    border-left-color: #667eea;
    font-weight: 600;
}

.help-main {
    flex: 1;
    background: #1a1a2e;
    border-radius: 12px;
    padding: 30px;
    overflow-y: auto;
}

.help-section {
    display: none;
}

.help-section.active {
    display: block;
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.help-section h3 {
    font-size: 22px;
    color: #fff;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 2px solid rgba(102, 126, 234, 0.3);
}

.help-section h4 {
    font-size: 18px;
    color: #667eea;
    margin: 25px 0 15px 0;
}

.help-section p {
    color: #b0b0b0;
    line-height: 1.8;
    margin-bottom: 15px;
}

.help-section ul, .help-section ol {
    color: #b0b0b0;
    line-height: 2;
    margin-bottom: 15px;
    padding-left: 25px;
}

.help-section code {
    background: #0f0f1e;
    color: #4ecca3;
    padding: 2px 8px;
    border-radius: 4px;
    font-family: 'Courier New', monospace;
    font-size: 13px;
}

.help-section pre {
    background: #0f0f1e;
    color: #4ecca3;
    padding: 15px;
    border-radius: 8px;
    overflow-x: auto;
    margin-bottom: 20px;
    border: 1px solid rgba(102, 126, 234, 0.2);
}

.help-section pre code {
    background: transparent;
    padding: 0;
}

.warning-box {
    background: rgba(243, 156, 18, 0.1);
    border-left: 4px solid #f39c12;
    padding: 15px;
    margin: 20px 0;
    border-radius: 4px;
}

.warning-box strong {
    color: #f39c12;
}

.info-box {
    background: rgba(52, 152, 219, 0.1);
    border-left: 4px solid #3498db;
    padding: 15px;
    margin: 20px 0;
    border-radius: 4px;
}

.info-box strong {
    color: #3498db;
}

.success-box {
    background: rgba(46, 204, 113, 0.1);
    border-left: 4px solid #2ecc71;
    padding: 15px;
    margin: 20px 0;
    border-radius: 4px;
}

.success-box strong {
    color: #2ecc71;
}

.step-list {
    counter-reset: step-counter;
    list-style: none;
    padding-left: 0;
}

.step-list li {
    counter-increment: step-counter;
    margin-bottom: 20px;
    padding-left: 40px;
    position: relative;
}

.step-list li::before {
    content: counter(step-counter);
    position: absolute;
    left: 0;
    top: 0;
    width: 30px;
    height: 30px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: #fff;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
}
</style>

<script>
const helpContent = {
    'getting-started': `
        <div class="help-section active" id="section-getting-started">
            <h3>üöÄ B·∫Øt ƒë·∫ßu nhanh v·ªõi Bi Ads Multi Tool PRO v3.0</h3>
            
            <div class="success-box">
                <strong>Ch√†o m·ª´ng!</strong> ƒê√¢y l√† phi√™n b·∫£n n√¢ng c·∫•p ho√†n to√†n m·ªõi v·ªõi nhi·ªÅu t√≠nh nƒÉng m·∫°nh m·∫Ω.
            </div>

            <h4>C√†i ƒë·∫∑t v√† kh·ªüi ƒë·ªông</h4>
            <ol class="step-list">
                <li><strong>C√†i ƒë·∫∑t dependencies:</strong>
                    <pre><code>cd backend
python -m venv venv
source venv/bin/activate  # Linux/Mac
venv\\Scripts\\activate   # Windows
pip install -r requirements.txt</code></pre>
                </li>
                <li><strong>C·∫•u h√¨nh m√¥i tr∆∞·ªùng:</strong>
                    <p>Copy file <code>.env.example</code> th√†nh <code>.env</code> v√† ƒëi·ªÅn th√¥ng tin:</p>
                    <pre><code>FACEBOOK_APP_ID=your_app_id
FACEBOOK_APP_SECRET=your_app_secret
TELEGRAM_BOT_TOKEN=your_bot_token
TELEGRAM_CHAT_ID=your_chat_id</code></pre>
                </li>
                <li><strong>Kh·ªüi ƒë·ªông Backend API:</strong>
                    <pre><code>cd backend
python main.py</code></pre>
                    <p>API s·∫Ω ch·∫°y t·∫°i: <code>http://localhost:8000</code></p>
                </li>
                <li><strong>Kh·ªüi ƒë·ªông Electron App:</strong>
                    <pre><code>npm install
npm start</code></pre>
                </li>
            </ol>

            <h4>T√≠nh nƒÉng m·ªõi trong v3.0</h4>
            <ul>
                <li>‚úÖ <strong>Facebook Webhook Integration</strong> - Nh·∫≠n s·ª± ki·ªán real-time</li>
                <li>‚úÖ <strong>Telegram Bot</strong> - Th√¥ng b√°o t·ª©c th√¨ v·ªÅ tasks v√† events</li>
                <li>‚úÖ <strong>Plugin System</strong> - M·ªü r·ªông ch·ª©c nƒÉng d·ªÖ d√†ng</li>
                <li>‚úÖ <strong>Professional UI</strong> - Giao di·ªán hi·ªán ƒë·∫°i, elegant</li>
                <li>‚úÖ <strong>Settings Panel</strong> - C·∫•u h√¨nh to√†n di·ªán</li>
                <li>‚úÖ <strong>Multi-threading</strong> - X·ª≠ l√Ω ƒëa t√†i kho·∫£n song song</li>
            </ul>

            <div class="warning-box">
                <strong>L∆∞u √Ω:</strong> ƒê·∫£m b·∫£o b·∫°n ƒë√£ c·∫•u h√¨nh ƒë·∫ßy ƒë·ªß Facebook App v√† Telegram Bot tr∆∞·ªõc khi s·ª≠ d·ª•ng c√°c t√≠nh nƒÉng webhook v√† notification.
            </div>
        </div>
    `,
    
    'account-management': `
        <div class="help-section" id="section-account-management">
            <h3>üë§ Qu·∫£n l√Ω t√†i kho·∫£n Facebook</h3>
            
            <h4>Import t√†i kho·∫£n t·ª´ file via.txt</h4>
            <p>ƒê·ªãnh d·∫°ng file via.txt ƒë∆∞·ª£c h·ªó tr·ª£:</p>
            <pre><code>UID|USERNAME|PASSWORD|EMAIL|2FA_KEY|COOKIES|ACCESS_TOKEN
100012345678|john.doe|pass123|john@email.com|ABCD1234|[cookies_json]|EAABsb...</code></pre>

            <div class="info-box">
                <strong>M·∫πo:</strong> File via.txt c√≥ th·ªÉ ch·ªâ ch·ª©a UID v√† cookies l√† ƒë·ªß ƒë·ªÉ import. C√°c tr∆∞·ªùng kh√°c l√† optional.
            </div>

            <h4>C√°c ph∆∞∆°ng th·ª©c login ƒë∆∞·ª£c h·ªó tr·ª£</h4>
            <ul>
                <li><strong>Cookies</strong> - Ph·ªï bi·∫øn nh·∫•t, an to√†n v√† ·ªïn ƒë·ªãnh</li>
                <li><strong>Access Token</strong> - S·ª≠ d·ª•ng cho Facebook Graph API</li>
                <li><strong>Email/Password</strong> - Login tr·ª±c ti·∫øp (y√™u c·∫ßu 2FA key n·∫øu c√≥)</li>
            </ul>

            <h4>Qu·∫£n l√Ω tr·∫°ng th√°i t√†i kho·∫£n</h4>
            <ul>
                <li><code>active</code> - T√†i kho·∫£n ho·∫°t ƒë·ªông b√¨nh th∆∞·ªùng</li>
                <li><code>inactive</code> - T√†i kho·∫£n t·∫°m ng∆∞ng s·ª≠ d·ª•ng</li>
                <li><code>checkpoint</code> - T√†i kho·∫£n b·ªã checkpoint</li>
                <li><code>banned</code> - T√†i kho·∫£n b·ªã kh√≥a vƒ©nh vi·ªÖn</li>
            </ul>

            <h4>API Endpoints</h4>
            <pre><code>GET    /api/accounts          - L·∫•y danh s√°ch t√†i kho·∫£n
POST   /api/accounts          - T·∫°o t√†i kho·∫£n m·ªõi
GET    /api/accounts/{id}     - Xem chi ti·∫øt
PUT    /api/accounts/{id}     - C·∫≠p nh·∫≠t th√¥ng tin
DELETE /api/accounts/{id}     - X√≥a t√†i kho·∫£n
POST   /api/accounts/import-via - Import t·ª´ via.txt</code></pre>
        </div>
    `,
    
    'webhook': `
        <div class="help-section" id="section-webhook">
            <h3>üì° C·∫•u h√¨nh Facebook Webhook</h3>
            
            <h4>B∆∞·ªõc 1: T·∫°o Facebook App</h4>
            <ol class="step-list">
                <li>Truy c·∫≠p <a href="https://developers.facebook.com/apps/" target="_blank">Facebook Developers</a></li>
                <li>Click "Create App" ‚Üí Ch·ªçn lo·∫°i app ph√π h·ª£p</li>
                <li>ƒêi·ªÅn th√¥ng tin app v√† t·∫°o</li>
                <li>V√†o Settings ‚Üí Basic ‚Üí Copy App ID v√† App Secret</li>
            </ol>

            <h4>B∆∞·ªõc 2: C·∫•u h√¨nh Webhook</h4>
            <ol class="step-list">
                <li>V√†o Products ‚Üí Add Product ‚Üí Ch·ªçn "Webhooks"</li>
                <li>Ch·ªçn "Page" ‚Üí Click "Subscribe to this object"</li>
                <li>Callback URL: <code>https://your-domain.com/webhook</code></li>
                <li>Verify Token: Nh·∫≠p token b·∫°n ƒë√£ c·∫•u h√¨nh trong .env</li>
                <li>Ch·ªçn c√°c subscription fields:
                    <ul>
                        <li>feed - B√†i vi·∫øt m·ªõi/c·∫≠p nh·∫≠t</li>
                        <li>comments - B√¨nh lu·∫≠n</li>
                        <li>reactions - Reactions (like, love, etc.)</li>
                        <li>mention - ƒê∆∞·ª£c mention</li>
                    </ul>
                </li>
            </ol>

            <h4>B∆∞·ªõc 3: K√≠ch ho·∫°t Webhook trong code</h4>
            <p>File <code>backend/main.py</code> ƒë√£ c√≥ s·∫µn webhook endpoints:</p>
            <pre><code>GET  /webhook - Verification endpoint (Facebook g·ªçi ƒë·ªÉ verify)
POST /webhook - Nh·∫≠n webhook events t·ª´ Facebook</code></pre>

            <div class="warning-box">
                <strong>B·∫£o m·∫≠t:</strong> Webhook s·ª≠ d·ª•ng HMAC SHA256 signature verification ƒë·ªÉ ƒë·∫£m b·∫£o request ƒë·∫øn t·ª´ Facebook.
            </div>

            <h4>Webhook Event Flow</h4>
            <pre><code>Facebook ‚Üí POST /webhook ‚Üí Verify signature ‚Üí Process event ‚Üí 
Save to DB ‚Üí Send Telegram notification</code></pre>

            <div class="success-box">
                <strong>T·ª± ƒë·ªông h√≥a:</strong> Khi webhook nh·∫≠n ƒë∆∞·ª£c event, h·ªá th·ªëng t·ª± ƒë·ªông:
                <ul>
                    <li>L∆∞u event v√†o database</li>
                    <li>G·ª≠i th√¥ng b√°o l√™n Telegram</li>
                    <li>Trigger c√°c plugin handler (n·∫øu c√≥)</li>
                </ul>
            </div>
        </div>
    `,
    
    'telegram': `
        <div class="help-section" id="section-telegram">
            <h3>üì± C·∫•u h√¨nh Telegram Bot</h3>
            
            <h4>T·∫°o Telegram Bot</h4>
            <ol class="step-list">
                <li>M·ªü Telegram v√† t√¨m <code>@BotFather</code></li>
                <li>G·ª≠i l·ªánh <code>/newbot</code></li>
                <li>ƒê·∫∑t t√™n cho bot (v√≠ d·ª•: "Bi Ads Notifier")</li>
                <li>ƒê·∫∑t username cho bot (ph·∫£i k·∫øt th√∫c b·∫±ng "bot")</li>
                <li>Copy Bot Token ƒë∆∞·ª£c cung c·∫•p</li>
            </ol>

            <h4>L·∫•y Chat ID</h4>
            <ol class="step-list">
                <li>T√¨m <code>@userinfobot</code> tr√™n Telegram</li>
                <li>G·ª≠i b·∫•t k·ª≥ tin nh·∫Øn n√†o</li>
                <li>Bot s·∫Ω tr·∫£ v·ªÅ Chat ID c·ªßa b·∫°n</li>
                <li>Copy Chat ID n√†y</li>
            </ol>

            <h4>C·∫•u h√¨nh trong .env</h4>
            <pre><code>TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_CHAT_ID=987654321</code></pre>

            <h4>C√°c lo·∫°i notification ƒë∆∞·ª£c h·ªó tr·ª£</h4>
            <ul>
                <li><strong>Task Notifications</strong> - Th√¥ng b√°o v·ªÅ tr·∫°ng th√°i tasks</li>
                <li><strong>Webhook Events</strong> - S·ª± ki·ªán t·ª´ Facebook</li>
                <li><strong>System Alerts</strong> - C·∫£nh b√°o l·ªói h·ªá th·ªëng</li>
                <li><strong>Custom Notifications</strong> - Th√¥ng b√°o t√πy ch·ªânh</li>
            </ul>

            <h4>Bot Commands</h4>
            <pre><code>/start    - B·∫Øt ƒë·∫ßu bot
/help     - Xem danh s√°ch l·ªánh
/status   - Ki·ªÉm tra tr·∫°ng th√°i h·ªá th·ªëng
/tasks    - Xem danh s√°ch tasks ƒëang ch·∫°y
/accounts - Xem th√¥ng tin t√†i kho·∫£n
/stats    - Xem th·ªëng k√™ t·ªïng quan</code></pre>

            <div class="info-box">
                <strong>Zero Dependencies:</strong> Telegram Bot module ƒë∆∞·ª£c implement b·∫±ng <code>urllib</code> kh√¥ng c·∫ßn th∆∞ vi·ªán ngo√†i.
            </div>
        </div>
    `,
    
    'faq': `
        <div class="help-section" id="section-faq">
            <h3>üí° C√¢u h·ªèi th∆∞·ªùng g·∫∑p (FAQ)</h3>
            
            <h4>Q: L√†m sao ƒë·ªÉ import nhi·ªÅu t√†i kho·∫£n c√πng l√∫c?</h4>
            <p><strong>A:</strong> S·ª≠ d·ª•ng ch·ª©c nƒÉng import t·ª´ file via.txt. File c√≥ th·ªÉ ch·ª©a h√†ng ngh√¨n t√†i kho·∫£n, h·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông x·ª≠ l√Ω v√† validate.</p>

            <h4>Q: C√≥ th·ªÉ ch·∫°y nhi·ªÅu tasks c√πng l√∫c kh√¥ng?</h4>
            <p><strong>A:</strong> C√≥! H·ªá th·ªëng h·ªó tr·ª£ multi-threading v·ªõi ChromeDriver ·∫©n. B·∫°n c√≥ th·ªÉ c·∫•u h√¨nh s·ªë l∆∞·ª£ng concurrent tasks trong Settings.</p>

            <h4>Q: Proxy b·∫Øt bu·ªôc ph·∫£i c√≥ kh√¥ng?</h4>
            <p><strong>A:</strong> Kh√¥ng b·∫Øt bu·ªôc nh∆∞ng r·∫•t khuy·∫øn kh√≠ch. S·ª≠ d·ª•ng proxy gi√∫p tr√°nh b·ªã Facebook ph√°t hi·ªán v√† checkpoint khi ch·∫°y nhi·ªÅu t√†i kho·∫£n.</p>

            <h4>Q: Webhook kh√¥ng nh·∫≠n ƒë∆∞·ª£c events?</h4>
            <p><strong>A:</strong> Ki·ªÉm tra:
                <ul>
                    <li>Server c·ªßa b·∫°n c√≥ public URL v√† accessible t·ª´ internet</li>
                    <li>Callback URL ƒë√∫ng ƒë·ªãnh d·∫°ng: <code>https://domain.com/webhook</code></li>
                    <li>Verify token kh·ªõp v·ªõi token trong .env</li>
                    <li>App ƒë√£ subscribe ƒë√∫ng c√°c fields (feed, comments, etc.)</li>
                </ul>
            </p>

            <h4>Q: Telegram kh√¥ng g·ª≠i ƒë∆∞·ª£c th√¥ng b√°o?</h4>
            <p><strong>A:</strong> ƒê·∫£m b·∫£o:
                <ul>
                    <li>Bot token ƒë√∫ng v√† bot ƒëang active</li>
                    <li>Chat ID ƒë√∫ng</li>
                    <li>B·∫°n ƒë√£ nh·∫Øn tin v·ªõi bot √≠t nh·∫•t 1 l·∫ßn</li>
                    <li>Test b·∫±ng n√∫t "Test th√¥ng b√°o" trong Settings</li>
                </ul>
            </p>

            <h4>Q: Database b·ªã l·ªói ho·∫∑c corrupted?</h4>
            <p><strong>A:</strong> Backup v√† restore:
                <pre><code># Backup
cp bi_ads.db bi_ads.db.backup

# Restore
cp bi_ads.db.backup bi_ads.db</code></pre>
                Ho·∫∑c x√≥a file database ƒë·ªÉ t·∫°o m·ªõi (m·∫•t d·ªØ li·ªáu c≈©).
            </p>

            <h4>Q: Plugin kh√¥ng ho·∫°t ƒë·ªông?</h4>
            <p><strong>A:</strong> Ki·ªÉm tra:
                <ul>
                    <li>Plugin ƒë√£ ƒë∆∞·ª£c enable trong Plugin Manager</li>
                    <li>Dependencies c·ªßa plugin ƒë√£ ƒë∆∞·ª£c c√†i ƒë·∫∑t</li>
                    <li>Xem logs ƒë·ªÉ t√¨m l·ªói c·ª• th·ªÉ</li>
                </ul>
            </p>

            <h4>Q: L√†m sao ƒë·ªÉ n√¢ng c·∫•p l√™n PostgreSQL?</h4>
            <p><strong>A:</strong> 
                <ol>
                    <li>C√†i PostgreSQL server</li>
                    <li>T·∫°o database: <code>createdb bi_ads</code></li>
                    <li>Update .env: <code>DATABASE_URL=postgresql+asyncpg://user:pass@localhost/bi_ads</code></li>
                    <li>Restart server</li>
                </ol>
            </p>

            <div class="info-box">
                <strong>C·∫ßn h·ªó tr·ª£ th√™m?</strong> 
                <ul>
                    <li>üìß Email: support@biads.com</li>
                    <li>üí¨ Telegram: @BiAdsSupport</li>
                    <li>üåê Website: https://biads.com</li>
                </ul>
            </div>
        </div>
    `
};

// Help navigation
const helpNav = {
    init() {
        document.querySelectorAll('.help-nav-item').forEach(item => {
            item.addEventListener('click', (e) => {
                const section = e.target.dataset.section;
                this.showSection(section);
            });
        });

        // Search functionality
        document.getElementById('helpSearch').addEventListener('input', (e) => {
            this.search(e.target.value);
        });

        // Load all sections
        this.loadAllSections();
    },

    loadAllSections() {
        const container = document.getElementById('helpMain');
        container.innerHTML = '';

        for (const [key, content] of Object.entries(helpContent)) {
            const div = document.createElement('div');
            div.innerHTML = content;
            container.appendChild(div.firstElementChild);
        }

        // Show first section
        this.showSection('getting-started');
    },

    showSection(sectionId) {
        // Update nav
        document.querySelectorAll('.help-nav-item').forEach(item => {
            item.classList.remove('active');
        });
        document.querySelector(`[data-section="${sectionId}"]`).classList.add('active');

        // Show section
        document.querySelectorAll('.help-section').forEach(section => {
            section.classList.remove('active');
        });
        document.getElementById(`section-${sectionId}`).classList.add('active');
    },

    search(query) {
        if (!query) {
            // Show all sections
            document.querySelectorAll('.help-section').forEach(s => s.style.display = 'none');
            document.getElementById('section-getting-started').style.display = 'block';
            return;
        }

        query = query.toLowerCase();
        let found = false;

        document.querySelectorAll('.help-section').forEach(section => {
            const text = section.textContent.toLowerCase();
            if (text.includes(query)) {
                section.style.display = 'block';
                section.classList.add('active');
                found = true;
            } else {
                section.style.display = 'none';
                section.classList.remove('active');
            }
        });

        if (!found) {
            app.addLog('warning', `Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£ cho: "${query}"`);
        }
    }
};

// Initialize
helpNav.init();
</script>
